query DashboardOverview($network: BitcoinNetwork!, $nodeId: ID, $nodeIds: [ID!], $after_date: DateTime, $before_date: DateTime) {
    current_account {
        id
        name
        dashboard_overview_nodes: nodes(
            first: 50
            bitcoin_networks: [$network]
            node_ids: $nodeIds
        ) {
            count
            edges {
                entity {
                    color
                    display_name
                    purpose
                    id
                    addresses(first: 1) {
                        edges {
                            entity {
                                address
                                type
                                __typename
                            }
                            __typename
                        }
                        count
                        __typename
                    }
                    public_key
                    status
                    upgrade_available
                    conductivity
                    local_balance {
                        value
                        unit
                        value
                        unit
                        __typename
                    }
                    remote_balance {
                        value
                        unit
                        value
                        unit
                        __typename
                    }
                    blockchain_balance {
                        available_balance {
                            value
                            unit
                            __typename
                        }
                        total_balance {
                            value
                            unit
                            __typename
                        }
                        __typename
                    }
                    __typename
                }
                __typename
            }
            __typename
        }
        blockchain_balance(bitcoin_networks: [$network], node_ids: $nodeIds) {
            l1_balance: total_balance {
                value
                unit
                __typename
            }
            required_reserve {
                value
                unit
                __typename
            }
            available_balance {
                value
                unit
                __typename
            }
            unconfirmed_balance {
                value
                unit
                __typename
            }
            __typename
        }
        local_balance(bitcoin_networks: [$network], node_ids: $nodeIds) {
            value
            unit
            __typename
        }
        remote_balance(bitcoin_networks: [$network], node_ids: $nodeIds) {
            value
            unit
            __typename
        }
        ...DashboardOverviewMetrics_account
        __typename
    }
}

fragment DashboardOverviewMetrics_account on Account {
    conductivity: conductivity(bitcoin_networks: [$network], node_ids: $nodeIds)
    lightning_nodes_stats: nodes(bitcoin_networks: [$network]) {
        count
        purpose
        __typename
    }
    dashboard_overview_nodes: nodes(
        first: 50
        bitcoin_networks: [$network]
        node_ids: $nodeIds
    ) {
        count
        edges {
            entity {
                id
                purpose
                __typename
            }
            __typename
        }
        __typename
    }
    received_transactions: transactions(
        types: [PAYMENT_REQUEST]
        bitcoin_network: $network
        lightning_node_id: $nodeId
        after_date: $after_date
        before_date: $before_date
        statuses: [SUCCESS]
    ) {
        count
        total_amount_transacted {
            value
            unit
            __typename
        }
        __typename
    }
    routing_transactions: transactions(
        types: [ROUTE]
        first: 100
        bitcoin_network: $network
        lightning_node_id: $nodeId
        after_date: $after_date
        before_date: $before_date
        statuses: [SUCCESS]
    ) {
        count
        total_amount_transacted {
            value
            unit
            __typename
        }
        __typename
    }
    sent_transactions: transactions(
        types: [PAYMENT]
        bitcoin_network: $network
        lightning_node_id: $nodeId
        after_date: $after_date
        before_date: $before_date
        statuses: [SUCCESS]
    ) {
        count
        total_amount_transacted {
            value
            unit
            __typename
        }
        __typename
    }
    channels(bitcoin_network: $network, lightning_node_id: $nodeId) {
        count(exclude_failed_closed: true)
        __typename
    }
    uptime_percentage(
        bitcoin_networks: [$network]
        node_ids: $nodeIds
        after_date: $after_date
        before_date: $before_date
    )
    blockchain_balance(bitcoin_networks: [$network], node_ids: $nodeIds) {
        total_balance {
            value
            unit
            __typename
        }
        __typename
    }
    local_balance(bitcoin_networks: [$network], node_ids: $nodeIds) {
        value
        unit
        __typename
    }
    __typename
}
